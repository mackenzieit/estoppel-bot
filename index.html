<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Estoppel Letter Bot</title>

    <!-- OpenAI domain verification: keep YOUR real key -->
    <meta name="openai-domain-verification" content="domain_pk_691016fbbcec81908e8cc5bea8b2c8a007286564828bd656" />

    <!-- ChatKit SDK (from the docs). Use DEFER, not async, so it loads before init
    <script src="https://cdn.platform.openai.com/deployments/chatkit/chatkit.js?v=2" defer></script>
        <script src="https://cdn.platform.openai.com/deployments/chatkit/chatkit.js" defer></script>
    -->
    
    <script src="https://cdn.platform.openai.com/deployments/chatkit/chatkit.js?v=2" defer></script>

    <style>
      html, body { height:100%; margin:0; background:#f9fafb; color:#1e293b;
        font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; }
      @media (prefers-color-scheme: dark) { body { background:#0f172a; color:#e2e8f0; } }
      #chat { height:100vh; width:100vw; display:flex; align-items:center; justify-content:center; }
      .loading { font-size:1.1rem; opacity:.7; }
      #err { position:fixed; left:12px; bottom:12px; font:12px/1.4 monospace; color:#b91c1c; }
    </style>
  </head>
  <body>
    <div id="chat"><div class="loading">Loading Estoppel Letter Bot...</div></div>
    <div id="err"></div>

<script>
  function initChatKit() {
    if (!window.ChatKit) {
      console.log("‚è≥ Waiting for ChatKit SDK...");
      setTimeout(initChatKit, 500);
      return;
    }

    console.log("‚úÖ ChatKit SDK found, initializing manually...");

    try {
      window.ChatKit.open({
        workflow_id: "wf_690bb1d11a1c8190adcb640e789dc71508144f38704a106c",
        version: "1",
        theme: "light",
        // üëá Explicitly pass domain verification
        domain: "black-meadow-0d305bb0f.3.azurestaticapps.net",
        skip_domain_verification: true,
      });
    } catch (err) {
      console.error("‚ùå ChatKit init error:", err);
    }
  }

  // Wait for script to load, then initialize
  window.addEventListener("load", initChatKit);
</script>

  </body>
</html>
